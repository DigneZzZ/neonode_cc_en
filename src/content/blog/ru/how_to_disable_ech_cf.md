---
title: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ Encrypted Client Hello (ECH) –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ –Ω–∞ Cloudflare
description: –£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ –æ—Ç–∫–ª—é—á–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é Encrypted Client Hello (ECH) –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞ –Ω–∞ Cloudflare, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –†–æ—Å–∫–æ–º–Ω–∞–¥–∑–æ—Ä–∞. –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –†–æ—Å—Å–∏–∏.
tags:
  - Cloudflare
  - ECH
  - TLS 1.3
  - –†–ö–ù
  - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
  - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
series: CloudflareGuide
draft: false
pubDate: 11 07 2024
---

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ Encrypted Client Hello (ECH) –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ –Ω–∞ Cloudflare

–†–æ—Å–∫–æ–º–Ω–∞–¥–∑–æ—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª Encrypted Client Hello (ECH), —á—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Cloudflare –≤ –†–æ—Å—Å–∏–∏. –ï—Å–ª–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å —ç—Ç–∏–º, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏, —á—Ç–æ–±—ã –æ—Ç–∫–ª—é—á–∏—Ç—å ECH –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–º—É —Ä–µ—Å—É—Ä—Å—É.

## –í–∞—Ä–∏–∞–Ω—Ç 0 - –æ—Ç–∫–ª—é—á–∏—Ç—å TLS 1.3 - –°–∞–º—ã–π –ø–ª–æ—Ö–æ–π –≤–∞—Ä–∏–∞–Ω—Ç!

## –í–∞—Ä–∏–∞–Ω—Ç 1 - –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–æ–º–µ–Ω–æ–≤

–¢–æ–∂–µ –≤—ã—Ö–æ–¥, –Ω–æ –∫–∞–∫–æ–π —Ç–æ–≥–¥–∞ —Å–º—ã—Å–ª? :)
–ò–¥–µ–º –¥–∞–ª—å—à–µ!

## –í–∞—Ä–∏–∞–Ω—Ç 2 - –æ—Ç–∫–ª—é—á–∞–µ–º ECH —á–µ—Ä–µ–∑ API Cloudflare

–≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç —Å–∞–º—ã–π –ª—É—á—à–∏–π!

### üîç –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞, –≤–∫–ª—é—á–µ–Ω –ª–∏ ECH

–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –≤–∫–ª—é—á–µ–Ω –ª–∏ ECH –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Å—ã–ª–∫–µ, –∑–∞–º–µ–Ω–∏–≤ `[–í–ê–®_–î–û–ú–ï–ù]` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω:

```bash
https://dns.google/resolve?name=\[–í–ê–®\_–î–û–ú–ï–ù\]&type=HTTPS
```

–ï—Å–ª–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ ECH –≤–∫–ª—é—á–µ–Ω, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.

### üîë –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è API Cloudflare

–î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è ECH –≤–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è **Global API Key** –∏ **Zone ID** –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞. –ü–æ–ª—É—á–∏—Ç—å –∏—Ö –º–æ–∂–Ω–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

- **Global API Key**: –≤–æ–π–¥–∏—Ç–µ –≤ [–ø—Ä–æ—Ñ–∏–ª—å Cloudflare](https://dash.cloudflare.com/profile/api-tokens) –∏ –Ω–∞–π–¥–∏—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–π API-–∫–ª—é—á.
- **Zone ID**: –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞ –Ω–∞ Cloudflare, –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ Zone ID.

### ‚öôÔ∏è –®–∞–≥ 3: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ ECH —á–µ—Ä–µ–∑ API Cloudflare

–¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–∞–Ω–¥—É `curl`, —á—Ç–æ–±—ã –æ—Ç–∫–ª—é—á–∏—Ç—å ECH. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –ø–æ–¥—Å—Ç–∞–≤–∏–≤ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ:

```bash
curl -X PATCH "https://api.cloudflare.com/client/v4/zones/{ID_ZONE}/settings/ech" \
    -H "X-Auth-Email: {ACCOUNT_EMAIL}" \
    -H "X-Auth-Key: {GLOBAL_API_KEY}" \
    -H "Content-Type:application/json" \
    --data '{"id":"ech","value":"off"}'
```

–ó–∞–º–µ–Ω–∏—Ç–µ `{ID_ZONE}`, `{ACCOUNT_EMAIL}`, –∏ `{GLOBAL_API_KEY}` –Ω–∞ —Å–≤–æ–∏ Zone ID, email –∏ API-–∫–ª—é—á —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

### üõ†Ô∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ ECH —á–µ—Ä–µ–∑ Postman

–ï—Å–ª–∏ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Postman, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –í Postman –≤—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ **PATCH** –∏ –≤–≤–µ–¥–∏—Ç–µ URL:  
   `https://api.cloudflare.com/client/v4/zones/{ID_ZONE}/settings/ech`
2. –í **Headers** –¥–æ–±–∞–≤—å—Ç–µ:
   - `X-Auth-Email`: –≤–∞—à email-–∞–¥—Ä–µ—Å Cloudflare
   - `X-Auth-Key`: –≤–∞—à Global API Key
   - `Content-Type`: `application/json`
3. –í **Body** –≤—ã–±–µ—Ä–∏—Ç–µ **raw** –∏ –≤—Å—Ç–∞–≤—å—Ç–µ JSON:
   ```json
   {"id": "ech", "value": "off"}
   ```

## üíº –î—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Cloudflare (–¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤ CF)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–ª–∞—Ç–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤ –º–æ–≥—É—Ç –æ—Ç–∫–ª—é—á–∏—Ç—å ECH —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Cloudflare:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL/TLS.
2. –í —Ä–∞–∑–¥–µ–ª–µ "Edge Certificates" –Ω–∞–π–¥–∏—Ç–µ "Encrypted ClientHello (ECH)" –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "Disabled".

---

–° –ø–æ–º–æ—â—å—é —ç—Ç–∏—Ö —à–∞–≥–æ–≤ –≤—ã —Å–º–æ–∂–µ—Ç–µ –æ–±–æ–π—Ç–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –†–æ—Å–∫–æ–º–Ω–∞–¥–∑–æ—Ä–∞ –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ—Å–ø–µ—Ä–µ–±–æ–π–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–∏–º —Ä–µ—Å—É—Ä—Å–∞–º. –ë–µ—Ä–µ–≥–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –∏ –±—É–¥—å—Ç–µ –≤ –∫—É—Ä—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π!
